<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-miscellaneous/known-issues">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="search" type="application/opensearchdescription+xml" title="TouchGFX Documentation" href="/4.20/ja/opensearch.xml">
<script src="/4.20/js/fix-location.js"></script><title data-rh="true">既知の問題 | TouchGFX Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://support.touchgfx.com/4.20/ja/img/meta-image.png"><meta data-rh="true" name="twitter:image" content="https://support.touchgfx.com/4.20/ja/img/meta-image.png"><meta data-rh="true" property="og:url" content="https://support.touchgfx.com/4.20/ja/docs/miscellaneous/known-issues"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="既知の問題 | TouchGFX Documentation"><link data-rh="true" rel="icon" href="/4.20/ja/img/favicon.png"><link data-rh="true" rel="canonical" href="https://support.touchgfx.com/4.20/ja/docs/miscellaneous/known-issues"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.20/docs/miscellaneous/known-issues" hreflang="en"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.20/ko/docs/miscellaneous/known-issues" hreflang="ko"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.20/ja/docs/miscellaneous/known-issues" hreflang="ja"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.20/zh-CN/docs/miscellaneous/known-issues" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.20/zh-TW/docs/miscellaneous/known-issues" hreflang="zh-TW"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.20/docs/miscellaneous/known-issues" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://B8LNOI0XWD-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/4.20/ja/assets/css/styles.a19cb1ba.css">
<link rel="preload" href="/4.20/ja/assets/js/runtime~main.1f0ef3f3.js" as="script">
<link rel="preload" href="/4.20/ja/assets/js/main.53dde143.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">メイン･コンテンツまでスキップ</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/4.20/ja/docs/introduction/welcome"><div class="navbar__logo"><img src="/4.20/ja/img/logo.svg" alt="TouchGFX" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/4.20/ja/img/logo.svg" alt="TouchGFX" class="themedImage_W2Cr themedImage--dark_oUvU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><span><span>日本語</span></span></a><ul class="dropdown__menu"><li><a href="/4.20/docs/miscellaneous/known-issues" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/4.20/ko/docs/miscellaneous/known-issues" target="_self" rel="noopener noreferrer" class="dropdown__link">한국어</a></li><li><a href="/4.20/ja/docs/miscellaneous/known-issues" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">日本語</a></li><li><a href="/4.20/zh-CN/docs/miscellaneous/known-issues" target="_self" rel="noopener noreferrer" class="dropdown__link">简体中文</a></li><li><a href="/4.20/zh-TW/docs/miscellaneous/known-issues" target="_self" rel="noopener noreferrer" class="dropdown__link">繁體中文</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/4.20/ja/docs/introduction/welcome">4.20</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/4.20/ja/docs/miscellaneous/known-issues">4.20</a></li><li><a href="https://support.touchgfx.com/4.19" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.19<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.18" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.18<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.17" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.17<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.16" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.16<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.15" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.14" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.13" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">コミュニティ</a><a href="https://touchgfx.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">TouchGFX.com</a><div class="searchBox_Gz_y"><button type="button" class="DocSearch DocSearch-Button" aria-label="検索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">検索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.20/ja/docs/category/introduction">概要</a><button aria-label="Toggle the collapsible sidebar category &#x27;概要&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.20/ja/docs/category/basic-concepts">基本概念</a><button aria-label="Toggle the collapsible sidebar category &#x27;基本概念&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.20/ja/docs/development/development-introduction">開発</a><button aria-label="Toggle the collapsible sidebar category &#x27;開発&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/4.20/ja/docs/category/miscellaneous-1">その他</a><button aria-label="Toggle the collapsible sidebar category &#x27;その他&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.20/ja/docs/miscellaneous/updating-to-a-new-touchgfx-version">新しいTouchGFXバージョンへの更新</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.20/ja/docs/miscellaneous/getting-help">ヘルプ情報</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/4.20/ja/docs/miscellaneous/known-issues">既知の問題</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.20/ja/docs/miscellaneous/changelog">更新履歴</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.20/ja/docs/miscellaneous/3rd-party-components-in-touchgfx">TouchGFXのサード･パーティ･コンポーネント</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/4.20/ja/docs/miscellaneous/cookie-policy">Cookieポリシー</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.20/ja/docs/category/tutorials">チュートリアル</a><button aria-label="Toggle the collapsible sidebar category &#x27;チュートリアル&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/4.20/ja/docs/api/classes/classtouchgfx_1_1_abstract_button">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.20/ja/docs/category/resources">リソース</a><button aria-label="Toggle the collapsible sidebar category &#x27;リソース&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.20/ja/docs/category/miscellaneous-1"><span itemprop="name">その他</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">既知の問題</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">このページでは</button></div><div class="theme-doc-markdown markdown"><header><h1>既知の問題</h1></header><p>この記事では、すべてのTouchGFXバージョンにおける既知の問題と考えられる対応策を示します。 TouchGFXを特定のバージョンにアップグレードするために実行する必要があるアップグレード･ステップがあれば、その説明も行います。 使用している現在のバージョンが複数のリリースよりも古い場合は、最新のリリースに達するまですべてのリリースへのアップグレード･ステップを実行する必要があります。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="touchgfx-4-20-0">TouchGFX 4.20.0<a class="hash-link" href="#touchgfx-4-20-0" title="見出しに直接リンク">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="painter-interface-changed">Painter interface changed<a class="hash-link" href="#painter-interface-changed" title="見出しに直接リンク">​</a></h3><p>The method AbstractPainter::render() has been replaced by <a href="/4.20/ja/docs/api/classes/classtouchgfx_1_1_abstract_painter#function-paint">AbstractPainter::paint</a> for performance reasons.<br>
<!-- -->If you have implemented your own painter classes you need to adapt to this new interface. Read more in the <a href="/4.20/ja/docs/development/ui-development/touchgfx-engine-features/canvas-widgets">article</a> on Canvas Widgets.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="painter-implementation-moved-to-generated-files">Painter implementation moved to generated files<a class="hash-link" href="#painter-implementation-moved-to-generated-files" title="見出しに直接リンク">​</a></h3><p>In TouchGFX 4.20 the software routines that paint circles, lines, and other shapes have been moved from the framework code to the code generated by CubeMX. This means that you have to regenerate code in CubeMX after upgrading a project from TouchGFX 4.19.1 (or earlier) to TouchGFX 4.20. The reason for this change is to be able to use the graphics accelerator, DMA2D, when drawing circles and lines.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="instructions">Instructions<a class="hash-link" href="#instructions" title="見出しに直接リンク">​</a></h4><p>Find and open the .ioc file in the project root folder:</p><div class="figure"><a href="/4.20/ja/img/miscellaneous/known-issues/project-root-ioc.png" target="_blank"><img src="/4.20/ja/img/miscellaneous/known-issues/project-root-ioc.png"></a><p>Project IOC file</p></div><p>Select TouchGFX 4.20 in the Software Packs Component Selector (alt-O):</p><div class="figure"><a href="/4.20/ja/img/miscellaneous/known-issues/xcube-tgfx-420-selected.png" target="_blank"><img src="/4.20/ja/img/miscellaneous/known-issues/xcube-tgfx-420-selected.png"></a><p>Selecting TouchGFX 4.20</p></div><p>Close this dialog and press &quot;Generate Code&quot; in upper right corner. Now go to the TouchGFX Designer and regenerate code (F4).</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="linker-errors">Linker errors<a class="hash-link" href="#linker-errors" title="見出しに直接リンク">​</a></h4><p>If you don&#x27;t regenerate the code you will get linker errors if your project uses e.g. the Circle widget. The errors looks like this (here for 16bpp):</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Linking TouchGFX/build/bin/target.elf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Middlewares/ST/touchgfx/lib/core/cortex_m7/gcc\libtouchgfx.a(PainterRGB565.o): In function `touchgfx::PainterRGB565::paint(unsigned char*, short, short, short, short, unsigned char) const&#x27;:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(.text._ZNK8touchgfx13PainterRGB5655paintEPhssssh+0x1a): undefined reference to `touchgfx::paint::rgb565::lineFromColor(unsigned short*, unsigned int, unsigned long, unsigned char, unsigned long)&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Middlewares/ST/touchgfx/lib/core/cortex_m7/gcc\libtouchgfx.a(PainterRGB565.o): In function `touchgfx::PainterRGB565::tearDown() const&#x27;:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(.text._ZNK8touchgfx13PainterRGB5658tearDownEv+0x0): undefined reference to `touchgfx::paint::rgb565::tearDown()&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">collect2.exe: error: ld returned 1 exit status</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>For 24bpp:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Linking TouchGFX/build/bin/target.elf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Middlewares/ST/touchgfx/lib/core/cortex_m7/gcc\libtouchgfx.a(PainterRGB888.o): In function `touchgfx::PainterRGB888::paint(unsigned char*, short, short, short, short, unsigned char) const&#x27;:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        (.text._ZNK8touchgfx13PainterRGB8885paintEPhssssh+0x18): undefined reference to `touchgfx::paint::rgb888::lineFromColor(unsigned char*, unsigned int, unsigned long, unsigned char)&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Middlewares/ST/touchgfx/lib/core/cortex_m7/gcc\libtouchgfx.a(PainterRGB888.o): In function `touchgfx::PainterRGB888::tearDown() const&#x27;:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        (.text._ZNK8touchgfx13PainterRGB8888tearDownEv+0x0): undefined reference to `touchgfx::paint::rgb888::tearDown()&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        collect2.exe: error: ld returned 1 exit status</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>The missing functions are generated into <code>TouchGFX/target/generated/STM32DMA.cpp</code>, when you regenerate code in CubeMX.</p><p>If your controller does not have DMA2D (or it is not enabled), CubeMX will include the software routines that was used in TouchGFX 4.19.1 and previous versions.</p><p>If you for some reason cannot regenerate code in CubeMX, you can manually add the missing functions by inserting the following includes in a .cpp file in your application:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">#include &lt;touchgfx/hal/Paint.hpp&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#include &lt;touchgfx/hal/PaintRGB565Impl.hpp&gt; // 16bpp painting routines</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#include &lt;touchgfx/hal/PaintRGB888Impl.hpp&gt; // 24bpp painting routines</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="debugging-stm32g0-with-keil">Debugging STM32G0 with Keil<a class="hash-link" href="#debugging-stm32g0-with-keil" title="見出しに直接リンク">​</a></h3><p>TouchGFX projects for STM32G0 boards with the X-NUCLEO-GFX01M1/2 display modules uses the address range from 0x90000000 for data in the external SPI flash. This breaks the Keil debugger as it tries to access these addresses when starting a debug session. Keil gives the error &quot;Cannot access target. Shutting down debug session.&quot;</p><div class="figure"><a href="/4.20/ja/img/miscellaneous/known-issues/stm32g0-debugging-keil.png" target="_blank"><img src="/4.20/ja/img/miscellaneous/known-issues/stm32g0-debugging-keil.png"></a><p>Starting a debug session in Keil</p></div><p>The solution is to create a init script for the debugger, with the text:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">load STM32G071_NUCLEO\STM32G071_NUCLEO.axf NOCODE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">g,main</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>The NOCODE option tells Keil to not load the code. This removes the access problem.</p><div class="figure"><a href="/4.20/ja/img/miscellaneous/known-issues/debug-ini.png" target="_blank"><img src="/4.20/ja/img/miscellaneous/known-issues/debug-ini.png"></a><p>Debug initialization script for Keil</p></div><p>And select the file in the debug configuration dialogue:</p><div class="figure"><a href="/4.20/ja/img/miscellaneous/known-issues/keil-debug-dialog.png" target="_blank"><img src="/4.20/ja/img/miscellaneous/known-issues/keil-debug-dialog.png"></a><p>Debug configuration for Keil</p></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="compiling-stm32u5-and-stm32l5-projects-with-keil">Compiling STM32U5 and STM32L5 projects with Keil<a class="hash-link" href="#compiling-stm32u5-and-stm32l5-projects-with-keil" title="見出しに直接リンク">​</a></h3><p>Keil projects created with CubeMx are missing the DSP extension tag in the project file. This gives linker error when linking with the TouchGFX library, which has the DSP extension tag set. The linker errors will be like:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">STM32U575ZI_NUCLEO\STM32U575ZI_NUCLEO.axf: Error: L6366E: abstractpartition.o attributes are not compatible with the provided attributes.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Object abstractpartition.o contains Build Attributes that are incompatible with the provided attributes.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Tag_DSP_extension = This code was permitted to use Thumb DSP functions as an optional architecture extension above the base architecture as indicated by Tag_CPU_arch (=1)</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>The solution is to add the DSP tag in your .uvprojx project file (in the /Project/Targets/Target/TargetOption/TargetCommonOption/Cpu XML-element):</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Targets</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Target</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">TargetName</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">STM32U575ZI_NUCLEO</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">TargetName</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">ToolsetNumber</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token number" style="color:rgb(247, 140, 108)">0x4</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">ToolsetNumber</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">ToolsetName</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">ARM</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">ADS</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">ToolsetName</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">pCCUsed</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token number" style="color:rgb(247, 140, 108)">6120000</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">V6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token number" style="color:rgb(247, 140, 108)">12</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">\ARMCLANG</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">pCCUsed</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">uAC6</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">uAC6</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">TargetOption</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">TargetCommonOption</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Device</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">STM32U575ZITx</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">Device</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Vendor</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">STMicroelectronics</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">Vendor</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">PackID</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">Keil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">STM32U5xx_DFP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token number" style="color:rgb(247, 140, 108)">2.0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">PackID</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">PackURL</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">https</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//www.keil.com/pack/&lt;/PackURL&gt;</span><span class="token plain"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">Cpu</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">IRAM</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0x20000000</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token number" style="color:rgb(247, 140, 108)">0x200BFFFF</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">IROM</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0x08000000</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token number" style="color:rgb(247, 140, 108)">0x81FFFFF</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">CLOCK</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">8000000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">FPU3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">SFPU</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">CPUTYPE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Cortex-M33&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> ELITTLE TZ DSP</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">Cpu</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">FlashUtilSpec</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">FlashUtilSpec</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="logonserver-environment-variable">LOGONSERVER environment variable<a class="hash-link" href="#logonserver-environment-variable" title="見出しに直接リンク">​</a></h3><p>We have observed on a few computers that the TouchGFX is very slow (e.g. &quot;Run simulator&quot; does nothing for 30 seconds). It may help to set the environment variable LOGONSERVER to an empty value.</p><p>In bash, the command is:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">export LOGONSERVER=</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="touchgfx-4-19-0">TouchGFX 4.19.0<a class="hash-link" href="#touchgfx-4-19-0" title="見出しに直接リンク">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="new-way-of-working-with-typographies">New way of working with typographies<a class="hash-link" href="#new-way-of-working-with-typographies" title="見出しに直接リンク">​</a></h3><p>From TouchGFX 4.18.1 to TouchGFX 4.19.0 the use of typographies has changed. A typography now has a default setting and zero or more language specific settings.</p><p>Read more about this in the <a href="/4.20/ja/docs/development/ui-development/designer-user-guide/texts-view">Designer Guide</a></p><p>Text specific direction and typography is no longer an option, these options are moved to the new default and language specific settings. This new functionality affects the generated code in projects that used this feature. The Text Converter will generate a font id for the default setting and one for each language specific setting. A font id generated from a language specific setting will be named automatically, see example below.</p><div class="figure"><a href="/4.20/ja/img/miscellaneous/known-issues/text-specific-direction.png" target="_blank"><img src="/4.20/ja/img/miscellaneous/known-issues/text-specific-direction.png"></a><p>Setting direction and typography for a specific text in TouchGFX 4.18</p></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="example-auto-generated-font-ids">Example: Auto generated font ids<a class="hash-link" href="#example-auto-generated-font-ids" title="見出しに直接リンク">​</a></h4><ul><li>Default typography id: HEADLINE</li><li>Language specific setting: JPN</li></ul><p>This will generate two font ids in <code>generated/fonts/include/fonts/ApplicationFontProvider.hpp</code>:</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">TypographyFontIndex</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> touchgfx</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">FontId HEADLINE </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> touchgfx</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">FontId HEADLINE_AUTO_GENERATED_FOR_JPN </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="auto-generated-typographies-when-upgrading-to-4190">Auto generated typographies when upgrading to 4.19.0<a class="hash-link" href="#auto-generated-typographies-when-upgrading-to-4190" title="見出しに直接リンク">​</a></h4><p>As mentioned, the text specific direction and typography is no longer an option. As a result of this change in functionality, new typographies with default and language specific settings might be generated, when upgrading older versions. You can identify these auto generated typographies by their id. Either the text direction is used as suffix or a letter in the range A-Z:</p><ul><li>Headline_LTR</li><li>PosterText_RTL</li><li>Title_A</li><li>ButtonText_B</li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="referencing-font-ids-in-user-code">Referencing font ids in user code<a class="hash-link" href="#referencing-font-ids-in-user-code" title="見出しに直接リンク">​</a></h4><p>If you are referencing font ids in the user code, these might need to be updated. In cases where font ids are not referenced by symbol but by value, there is a risk of errors, as the font ids can change during an upgrade. It is recommended to always reference font ids by symbol, i.e. use <code>TypographyFontIndex::HEADLINE</code> instead of <code>0</code>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="using-libjpeg-with-armclang">Using LibJPEG with ARMCLANG<a class="hash-link" href="#using-libjpeg-with-armclang" title="見出しに直接リンク">​</a></h3><p>ARMCLANG projects where the LibJPEG middlewares is selected in CubeMX cannot run. ARMCLANG enables semi-hosting because LibJPEG refers to the libc file functions (e.g. fopen).<br>
<!-- -->Semi-hosting makes the application wait for a connection to a semi-hosting-aware debugger during startup.<br>
<!-- -->One way to resolve this issue is to remove references to fopen in LibJPEG by undefining JFILE in two files: <code>LibJPEG/source/jdatasrc.c</code> and <code>LibJPEG/source/jdatadst.c</code>:</p><div class="code-header"><div><h5>LibJPEG/source/jdatasrc.c</h5></div></div><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(195, 232, 141)">&quot;jerror.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">undef</span><span class="token macro property"> </span><span class="token macro property expression">JFILE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* Expanded data source object for stdio input */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">ifdef</span><span class="token macro property"> </span><span class="token macro property expression">JFILE </span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="code-header"><div><h5>LibJPEG/source/jdatadst.c</h5></div></div><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(195, 232, 141)">&quot;jerror.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">undef</span><span class="token macro property"> </span><span class="token macro property expression">JFILE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">ifndef</span><span class="token macro property"> </span><span class="token macro property expression">HAVE_STDLIB_H       </span><span class="token macro property comment" style="color:rgb(105, 112, 152);font-style:italic">/* &lt;stdlib.h&gt; should declare malloc(),free() */</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="mjpeg-video-on-h750b-discovery">MJPEG Video on H750B Discovery<a class="hash-link" href="#mjpeg-video-on-h750b-discovery" title="見出しに直接リンク">​</a></h3><p>The H750B Discovery board uses hardware decoding of YCbCr video data. A bug in the code supplied with TouchGFX for this board causes visible artifacts for some videos.<br>
<!-- -->A solution is to change to software decoding. In some cases it is also possible to remove the problem by changing the width of the video a few pixels.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="threadx-assembler-files">ThreadX assembler files<a class="hash-link" href="#threadx-assembler-files" title="見出しに直接リンク">​</a></h3><p>The ThreadX assembler files for Keil IDE is using the new ARMCLANG V6 assembler syntax. The startup.s files supplied in some firmware packs is using the syntax of the older ARMCC assembler.  This means that you have to generally set your project to use the ARMCLANG V6 assembler, and then override this for the startup_stm32xxx.s:</p><div class="figure"><a href="/4.20/ja/img/miscellaneous/known-issues/keil-assembler.png" target="_blank"><img src="/4.20/ja/img/miscellaneous/known-issues/keil-assembler.png"></a><p>Deselecting ARMCLANG V6 assembler for startup.s</p></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="touchgfx-4-18-0">TouchGFX 4.18.0<a class="hash-link" href="#touchgfx-4-18-0" title="見出しに直接リンク">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="issues-with-cubemx-610-and-cubeprogrammer-26">CubeMX 6.1.0およびCubeProgrammer 2.6による問題<a class="hash-link" href="#issues-with-cubemx-610-and-cubeprogrammer-26" title="見出しに直接リンク">​</a></h3><p>CubeMX 6.1.0バージョンでは現在、CubeMXによって生成されるEWARMプロジェクトがX-CUBE-TOUCHGFXで動作しません。これは、&quot;C/C++ Compiler&quot; / &quot;Language&quot;オプションで、&quot;Auto&quot;を&quot;C++&quot;に変更するという間違いが設定されており、コンパイル･エラーが発生するからです。 この問題はCubeMX 6.1.1で修正される予定です。 それまではオプションを手動で&quot;Auto&quot;に戻すとコンパイルの問題は解決します。ただし、CubeMXからのコード生成に戻ることになります。</p><p>外部ローダ（<code>.stldr</code>）の参照方法に関連するCubeProgrammer 2.6のバグにより、既存のすべてのアプリケーション･テンプレート（AT）のMakefileが壊れ、TouchGFX Designerの&quot;Run Target&quot;機能も正しく機能しません。 この問題は、ATの現在のバージョンをベースにするユーザ･プロジェクトも影響を及ぼします。 アプリケーション･テンプレートは、このバグを修正するためのアップデートを適用し、CubeProgrammer 2.5および2.6の両方で機能するようになる予定です。 CubeProgrammer 2.6で機能しないATをベースにしたプロジェクトである場合は、以下の変更を行ってサポートを追加することができます。 ユーザは外部ローダへの参照を作成するときに、<code>bin</code>フォルダ内の<code>STM32CubeProgrammer_CLI.exe</code>を実行する必要があります。 一般的には以下のとおりです。</p><ul><li>STM32CubeProgrammerのインストール･フォルダの<code>bin</code>フォルダへの<code>cd</code>を実行します。</li><li><code>.stldr</code>ファイルへのrelative参照を使用して、接続されたターゲットをプログラムするコマンドを実行します。</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@cd &quot;$(st_stm32cube_programmer_bin_path)&quot; &amp;&amp; ./$(stm_stm32cube_programmer_exe) -c port=SWD -d $(application_path)/$(binary_output_path)/target.hex -el $(stm32cubeLoader_relative_path) -hardRst</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="highlight highlight-note"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>Note</h5></div><div class="highlight-content">The CubeProgrammer bug is solved in version 2.10.</div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="new-touchgfx-format">新しい.touchgfxフォーマット<a class="hash-link" href="#new-touchgfx-format" title="見出しに直接リンク">​</a></h3><p>TouchGFX 4.17.0からTouchGFX 4.18.0に向けて、.touchfgxファイルの内容が2つの主要領域において大幅に変更されました。 このため、TouchGFX Designerを使用して.touchgfxプロジェクト･ファイルを開いて保存するだけで、.touchfgxファイルが大きく更新される可能性があります。 主要な変更が行われたのは以下の領域です。</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="default-values-are-not-written-to-touchgfx">デフォルト値が.touchgfxに書き込まれない<a class="hash-link" href="#default-values-are-not-written-to-touchgfx" title="見出しに直接リンク">​</a></h4><p>これまでは、ボックス･オフセット（X=0, Y=0）や黒色（red=0, green=0, blue=0）などのデフォルト値が設定された状態でウィジェット･パラメータが.touchgfxファイルに書き込まれていましたが、TouchGFXバージョン4.18.0では、これらの値が書き込まれません。 これにより、.touchgfxファイルのサイズが少し小さくなる可能性があります。</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="removed-textentries-block">TextEntriesブロックの削除<a class="hash-link" href="#removed-textentries-block" title="見出しに直接リンク">​</a></h4><p>SingleUseIdの名前が変更され、連続番号ではなくランダムな番号と文字が含まれるようになり、プロジェクトと複数のアクティブな開発者とのマージが容易になりました。新しいシングル･ユースのテキストIDが同じIDを取得しないからです。 さらに、.touchgfx内の&quot;TextEntries&quot;セクションが削除されたため、.touchgfxファイルのサイズが大幅に縮小される可能性があります。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="lcd16bpp-fillrect-and-lcd16bpp-drawglyph">LCD16bpp::fillRectとLCD16bpp::drawGlyph<a class="hash-link" href="#lcd16bpp-fillrect-and-lcd16bpp-drawglyph" title="見出しに直接リンク">​</a></h3><p>LCD16bppのfillRectおよびdrawGlyph関数が、軽減された16ビット（RGB565）カラーではなく、完全な24ビット･カラーをDMAに渡すようになりました。 このため（シミュレータではなく）ハードウェア上では誤った色になる可能性があります。これは、CubeMXからDMAクラスを再生成することで修正できます。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="makefile-and-xlsx">Makefileとxlsx<a class="hash-link" href="#makefile-and-xlsx" title="見出しに直接リンク">​</a></h3><p>TouchGFX 4.18.0では、テキストと翻訳を保存するために、以前使用されていた古い.xlsxフォーマットではなく、新しい.xmlフォーマットを使用します。 つまり、MakefileとVisual Studioプロジェクト内の&quot;texts.xlsx&quot;へのすべての参照を&quot;texts.xml&quot;に変更する必要があります。 古いtexts.xlsxファイルが存在していてtexts.xmlが存在していない場合でも、TextConvertツールはこれを認識して、将来の使用のためにtexts.xlsxをtexts.xmlに変換します。</p><p>新しい動作中のMakefileを確認するには、TouchGFX Designerを使用して、単純に新しい（空の）プロジェクトを作成し、generated/simulator/gcc/Makefileフォルダ内にある生成済みのMakefileを確認します。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="font-size-limit-in-textsxsd">Font size limit in texts.xsd<a class="hash-link" href="#font-size-limit-in-textsxsd" title="見出しに直接リンク">​</a></h3><p>The texts.xsd which is used by the designer to validate the texts.xml has a limit on the font size of 255. If you have font sizes greater than 255, you will see an error message in the designer like this:</p><div class="figure"><a href="/4.20/ja/img/miscellaneous/known-issues/font-size-limit-xsd.png" target="_blank"><img src="/4.20/ja/img/miscellaneous/known-issues/font-size-limit-xsd.png"></a><p>Error message - Font size limit</p></div><p>The workaround is to close the project, change the Typographies Size attribute from xs:unsignedByte to xs:unsignedInt in the texts.xsd and reopen the project.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="sdl2-linker-error-on-linux">LinuxでのSDL2リンカ･エラー<a class="hash-link" href="#sdl2-linker-error-on-linux" title="見出しに直接リンク">​</a></h3><p>シミュレータが使用するSDL2ライブラリは、Windowsユーザ向けのみに含まれるようになりました。 LinuxユーザはSDL2ライブラリそのものをインストールする必要があります。 このタスクの実行は1回限りで、ubuntu用のコマンドは以下のとおりです。</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt install libsdl2-dev libsdl2-image-dev</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>これにより、開発用にヘッダ･ファイルを含むlibsdl2およびlibsdl2-imageがインストールされます。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="touchgfx-4-17-0">TouchGFX 4.17.0<a class="hash-link" href="#touchgfx-4-17-0" title="見出しに直接リンク">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="painters-no-longer-support-setalpha">PainterではsetAlpha()がサポートされない<a class="hash-link" href="#painters-no-longer-support-setalpha" title="見出しに直接リンク">​</a></h3><p>パフォーマンス上の理由で、Canvas Widget Renderer（CWR）によって使用されるPainterでは、アルファがサポートされなくなりました。 Painterの存在するCanvas Widget上でアルファを設定することで、この効果をまだ得ることができます。 一般的なコードは以下のように変更できます。変更前:</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">painter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setColor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Color</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">getColorFromRGB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0xFF</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0x00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0x00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">painter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setAlpha</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">128</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">circle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setPainter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">painter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>変更後:</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">painter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setColor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Color</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">getColorFromRGB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0xFF</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0x00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0x00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">circle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setPainter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">painter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">circle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setAlpha</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">128</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>これまでにPainterとCanvas Widgetの両方にアルファを適用していた場合、これら2つのアルファ値を乗算し、さらに255で除算します。たとえば、</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">painter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setColor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Color</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">getColorFromRGB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0xFF</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0x00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0x00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">painter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setAlpha</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">painterAlpha</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">circle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setPainter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">painter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">circle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setAlpha</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">circleAlpha</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p> は、次のようになります。</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">painter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setColor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Color</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">getColorFromRGB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0xFF</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0x00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0x00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">circle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setPainter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">painter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">circle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setAlpha</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">painterAlpha </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> circleAlpha</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">255</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>または、255で除算する代わりに、LCD::div255()を使用します。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="using-the-hal-class">HALクラスの使用<a class="hash-link" href="#using-the-hal-class" title="見出しに直接リンク">​</a></h3><p>バージョン4.17.0より前は、HALをまったく使用しないTouchGFXフレームワーク内の複数のファイルに、ヘッダ･ファイルtouchgfx/hal/HAL.hppが含まれていました。 これらの不要な参照がクリーンアップされたことで、コンパイラがHALを認知しないために、ユーザ･コードがコンパイルされない可能性が出てきました。 これを修正するには、次のようにHALヘッダ･ファイルを単純に加えます。</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(195, 232, 141)">&lt;touchgfx/hal/HAL.hpp&gt;</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>あるいは、Screenクラスに、スクリーン･サイズを設定するためのgetScreenWidth()とgetScreenHeight()という2つの関数があります。 これはスクリーンのサイズを取得するために推奨される方法で、Screenの任意のサブクラスから直接呼び出すことができます（Screen1View.cppなど）。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="fmc-display-interface-in-touchgfx-generator">TouchGFX GeneratorのFMCディスプレイ･インタフェース<a class="hash-link" href="#fmc-display-interface-in-touchgfx-generator" title="見出しに直接リンク">​</a></h3><p>TouchGFX Generatorで新しいFMCディスプレイ･インタフェースを使用する場合、CubeMX 6.2.1で生成するときに、FMCバンクのメモリ･オフセットが正しく（ゼロに）設定されません。 これはCubeMX 6.3.0で修正予定で、リリース時点でX-CUBE-TouchGFXの最低限必要なバージョンが現在の6.2.1から6.3.0に引き上げられる予定です。 それまでは、ユーザが<code>TouchGFXGeneratedHAL.cpp</code>内に正しいFMC BANKメモリのアドレスを入力します（再生成時に上書きされます）。 たとえば、次のようになります。</p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name">FMC_BANK1_REG</span><span class="token macro property"> </span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token macro property expression keyword" style="font-style:italic">uint16_t</span><span class="token macro property expression"> </span><span class="token macro property expression operator" style="color:rgb(137, 221, 255)">*</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token macro property expression"> </span><span class="token macro property expression number" style="color:rgb(247, 140, 108)">0x60000000</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">define</span><span class="token macro property"> </span><span class="token macro property macro-name">FMC_BANK1_MEM</span><span class="token macro property"> </span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token macro property expression keyword" style="font-style:italic">uint16_t</span><span class="token macro property expression"> </span><span class="token macro property expression operator" style="color:rgb(137, 221, 255)">*</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token macro property expression"> </span><span class="token macro property expression number" style="color:rgb(247, 140, 108)">0x60000002</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ユーザは、<code>TouchGFXHAL.cpp</code>でこれら全体を再定義することもできます。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="l8-images-in-16-24-or-32bpp-configurations">16bpp、24bpp、32bpp構成のL8画像<a class="hash-link" href="#l8-images-in-16-24-or-32bpp-configurations" title="見出しに直接リンク">​</a></h3><p>L8画像のCLUTを読み込むときに、<code>OSWrappers::taskYield()</code>がSTM32DMAクラスに誤って導入されます。 これを修正するために、ユーザは以下を実行します。</p><ol><li><code>Users/&lt;user name&gt;/STM32Cube/Repository/Packs/STMicroelectronics/X-CUBE-TOUCHGFX/4.17.0/CubeMX/templates/Target</code>フォルダに移動。</li><li>ビット深度に基づいて、適切な<code>dma_Xbpp_implementation_tmp.ftl</code>ファイルを開く。</li><li><code>while ((READ_REG(DMA2D-&gt;FGPFCCR) &amp; DMA2D_FGPFCCR_START) != 0U)</code>ループ内の<code>OSWrappers::taskYield()</code>の呼び出しを削除またはコメント化し、STM32CubeMXからコードを再生成することで、この変更後のテンプレートを使用するコードを生成。</li></ol><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">READ_REG</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">DMA2D</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">FGPFCCR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> DMA2D_FGPFCCR_START</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0U</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// OSWrappers::taskYield();</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="touchgfx-4150">TouchGFX 4.15.0<a class="hash-link" href="#touchgfx-4150" title="見出しに直接リンク">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="mcu-support">マイクロコントローラのサポート<a class="hash-link" href="#mcu-support" title="見出しに直接リンク">​</a></h3><p>Cortex-M33はTouchGFXによって完全サポートされていますが、CubeMXにサポートを追加しない限り、現在のバージョンのCubeMX（v6.0.1）では、マルチ・コンテキストのマイクロコントローラに対して&quot;Software Packs&quot;（特にTouchGFX Generator）を有効にできません。 Cortex-M33ベースのマイクロコントローラの&quot;Trust Zone&quot;を無効化することで、マイクロコントローラを単一コンテキストに制限すれば、TouchGFX Generatorを有効にできます。 TrustZoneは、User Codeセクションで手動で有効化する必要があります。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="touchgfx-4140">TouchGFX 4.14.0<a class="hash-link" href="#touchgfx-4140" title="見出しに直接リンク">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="armclang-support">ARMCLANGのサポート<a class="hash-link" href="#armclang-support" title="見出しに直接リンク">​</a></h3><p>TouchGFXでは、Cortex-M0、Cortex-M4f、Cortex-M7、Cortex-M33に対して、ARMCLANG（ARM Compiler v6.x）ライブラリを提供するようになりました。しかし、CubeMXでは、ARMCLANGコンパイラ（ARM Compiler v6.x）を有効化するプロジェクトを生成できません。 このため、プロジェクト内でこのコンパイラを使用したいユーザは、Keil uVisionのプロジェクト･オプションから手動でコンパイラを選択する必要があります。</p><p>CubeMXからFreeRTOSミドルウェアを設定する場合、ARMCC（ARM Compiler v5.x）を使用する生成済みのプロジェクトは、ARMCLANGと互換性を持たないFreeRTOS portableファイルを持つことになるため、これらを手動で置き換える必要があります。 CubeMXから&quot;Generate code&quot;を実行すると常にすべての手動変更が上書きされるので、これらの特定の変更を元に戻せるよう、バージョン管理下（gitなど）にプロジェクトを保持しておくことをお勧めします。</p><p>要約すると、 CubeMXで生成できるのはARM Compiler v5.xコンパイラ･プロジェクトのみなので、ユーザはバージョン管理下にプロジェクトを保持していない限り、CubeMXからコードを生成するたびに以下の変更を行う必要があるということです。</p><ol><li>プロジェクト･オプションでARM Compiler v6.xを選択。</li><li>ARMCCライブラリ（CubeMXで設定されたもの）ではなく、ARMCLANGライブラリにリンク。</li><li>CubeMXからFreeRTOSを設定する場合、ARM Compiler v6.xと互換性を持たせるために、FreeRTOS portableファイルを<code>portable/RVDS</code>フォルダ（ARM Compiler v5.xのデフォルト）ではなく、<code>portable/GCC</code>フォルダから取得する。</li></ol><h4 class="anchor anchorWithStickyNavbar_mojV" id="workflow">ワーク・フロー<a class="hash-link" href="#workflow" title="見出しに直接リンク">​</a></h4><p>以下のワークフローは、CubeMXで生成されたプロジェクトとTouchGFX ARMCLANGライブラリを使い、Keil uVisionにあるv6.x ARM Compilerを使用する方法について説明しています。</p><ol><li>Keil uVisionでARMCLANG（v. 6.x）を選択。</li></ol><div class="figure noshadow"><a href="/4.20/ja/img/miscellaneous/known-issues/armclang-support.png" target="_blank"><img width="650" src="/4.20/ja/img/miscellaneous/known-issues/armclang-support.png"></a><p>ARMCLANGのサポート</p></div><ol start="2"><li><p>CubeMXからFreeRTOSを設定する場合、CubeMXは誤ったportable ファイルを生成し、それらを使用するようにプロジェクトが設定されまる。 ユーザはこれらを（<a href="https://github.com/FreeRTOS/FreeRTOS-Kernel/tree/6199b72fbf57a7c5b3d7b195a3bd1446779314cd/portable/GCC" target="_blank" rel="noopener noreferrer">https://github.com/FreeRTOS/FreeRTOS-Kernel/tree/6199b72fbf57a7c5b3d7b195a3bd1446779314cd/portable/GCC</a> (<code>port.c</code>および<code>portmacro.h</code>））にあるものに置き換えるか、FreeRTOSリリースをダウンロードしてその中からファイルを見つける必要があります。</p><p><code>port.c</code>を置き換えます。 </p><div class="figure noshadow"><a href="/4.20/ja/img/miscellaneous/known-issues/keil-port-c.png" target="_blank"><img width="250" src="/4.20/ja/img/miscellaneous/known-issues/keil-port-c.png"></a><p>port.c</p></div><p></p><p>インクルード･パスの設定を変更して、<code>portable/GCC</code>フォルダ（この場合はCortex-M7）の<code>portmacro.h</code>を含むようにします。 </p><div class="figure noshadow"><a href="/4.20/ja/img/miscellaneous/known-issues/keil-port-include.png" target="_blank"><img width="600" src="/4.20/ja/img/miscellaneous/known-issues/keil-port-include.png"></a><p>Portable のインクルード･パス</p></div><p></p></li><li><p>&quot;Generate Code&quot;実行時のTouchGFX Designer生成後ステップで、ユーザが選択したコンパイラ･バージョンに基づいて正しいライブラリが自動的に挿入される。</p></li></ol><h2 class="anchor anchorWithStickyNavbar_mojV" id="touchgfx-4130">TouchGFX 4.13.0<a class="hash-link" href="#touchgfx-4130" title="見出しに直接リンク">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="bugs">バグ<a class="hash-link" href="#bugs" title="見出しに直接リンク">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="font-converter">フォント･コンバータ<a class="hash-link" href="#font-converter" title="見出しに直接リンク">​</a></h4><p>FontConverterツールでは、アプリケーションの実際のテキストでそのグリフが使用されているかどうかに関わらず、フォントのルールの一部であるUnicode用のグリフのピクセル･データが生成されることがあります。 これにより数メガバイトのグリフのピクセル･データが、追加で発生する可能性があります。 新しいFontConverterツール（WindowsおよびLinux）では、アプリケーションで使用されていないグリフのピクセル･データは生成されなくなっています。新しいツールには次のリンクからアクセスできます。</p><ul><li><a href="http://sw-center-st-com.s3-eu-west-1.amazonaws.com/touchgfx/TouchGFX/Patches/4.13.0/fontconvert_fix.zip" target="_blank" rel="noopener noreferrer">fontconvert_fix.zip</a></li></ul><p>お使いの4.13.0インストールのルートにこのファイルを展開すると、フォント･コンバータのバイナリが以下の内部に更新されます。</p><p><code>touchgfx\framework\tools</code></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="additional-compiler-support">追加のコンパイラ･サポート<a class="hash-link" href="#additional-compiler-support" title="見出しに直接リンク">​</a></h3><p>ARMCLANGコンパイラ（v6.12）で構築されたライブラリには、次のリンクからアクセスできます。</p><ul><li><a href="http://sw-center-st-com.s3-eu-west-1.amazonaws.com/touchgfx/TouchGFX/Patches/4.13.0/touchgfx_core_clang.zip" target="_blank" rel="noopener noreferrer">touchgfx_core_clang.zip</a></li></ul><p>お使いの4.13.0インストールのルートにこのファイルを展開すると、ライブラリ<code>touchgfx_core_clang.lib</code>が以下の内部に配置されます。</p><p><code>touchgfx\lib\core\cortex_m7\Keil</code></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="backwards-compatibility">後方互換性<a class="hash-link" href="#backwards-compatibility" title="見出しに直接リンク">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="deprecated-features">非推奨になった機能<a class="hash-link" href="#deprecated-features" title="見出しに直接リンク">​</a></h4><p>以下に示す非推奨の機能は削除されました。 コード内でこれらを参照している場合は、アプリケーションの該当部分を書き換える必要がある場合があります。</p><ul><li>非推奨の<code>TRANSPARENT_COL</code>の定義</li><li><code>Drawable::getType()</code></li><li><code>HAL::blitSetTransparencyKey()</code></li><li><code>HAL::registerTextCache()</code></li><li><code>HAL::cacheTextString()</code></li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="texturemapper-is-disabled-by-default">TextureMapperがデフォルトで無効に<a class="hash-link" href="#texturemapper-is-disabled-by-default" title="見出しに直接リンク">​</a></h4><p>TouchGFXで使用するコード領域を削減するために、TextureMapperはデフォルトで無効になっています。 TouchGFX Designerは、すべての新しいプロジェクトに、テクスチャ･マッパーを有効にするためのコードを挿入します。</p><p>古いプロジェクトからTouchGFX 4.13に移行しており、TouchGFX 4.13に更新している場合、これはTouchGFX Designerによって処理されます。</p><p>ユーザが手動で更新している場合は、TextureMapperを有効化するためのコードを挿入する必要があります。 そうしない場合、TextureMapperはスクリーン上に描画しません。</p><p>詳細については、「<a href="/4.20/ja/docs/development/ui-development/designer-user-guide/config-view#framework-features">TouchGFXの機能の設定</a>」を参照してください。</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="hal-sdl1-incompatible">HAL SDL1との非互換<a class="hash-link" href="#hal-sdl1-incompatible" title="見出しに直接リンク">​</a></h4><p>2つの関数が、TouchGFXライブラリ･コードから<code>HALSDL2.cpp</code>に移動しました。 これにより、WindowsシミュレータのHALとして<code>HALSDL2.cpp</code>を使用するアプリケーションには何の影響もありません。</p><p>ただし、古いアプリケーション（TouchGFX 4.8.0より前）の場合、シミュレータはおそらくHALSDL（HALSDL2ではない）を使用してます。 このシミュレータのHALは、TouchGFXには含まれなくなりました。 HALSDLには、以前TouchGFXライブラリに含まれていた2つの関数が欠落しています。 ユーザはこれらを<code>HALSDL.cpp</code>に手動で追加する必要があります。</p><div class="code-header"><div><h5>HALSDL.cpp</h5></div></div><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">simulator_enable_stdio</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">simulator_enable_stdio</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    HWND consoleHwnd </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">GetConsoleWindow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Get handle of console window</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain">consoleHwnd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">                      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// No console window yet?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        HWND activeHwnd </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">GetActiveWindow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Remember which window is active</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">AllocConsole</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">                   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Allocate a new console</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        consoleHwnd </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">GetConsoleWindow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Get handle of console window</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        FILE</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> dummy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">freopen_s</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">dummy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CONIN$&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;r&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">stdin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Redirect stdin/stdout/stderr to the new console</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">freopen_s</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">dummy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CONOUT$&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;w&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">stdout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">freopen_s</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">dummy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CONOUT$&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;w&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">stderr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">SwitchToThisWindow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">activeHwnd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Switch back to the originally active window</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">consoleHwnd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">ShowWindow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">consoleHwnd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> SW_SHOW</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Show/hide it!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">simulator_printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">char</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> format</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> va_list pArg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">simulator_printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">char</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> format</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> va_list pArg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Create a console window, if window is visible.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">simulator_enable_stdio</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">GetConsoleWindow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Only print if we have a console window</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">vprintf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">format</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> pArg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="touchgfx-4123">TouchGFX 4.12.3<a class="hash-link" href="#touchgfx-4123" title="見出しに直接リンク">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="backwards-compatibility-1">後方互換性<a class="hash-link" href="#backwards-compatibility-1" title="見出しに直接リンク">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="screen-transitions">スクリーン遷移<a class="hash-link" href="#screen-transitions" title="見出しに直接リンク">​</a></h4><p>以前のバージョンでは、スクリーン遷移の完了後にスクリーン全体を再描画していました。 この追加の再描画により、一部の低速のプラットフォームでパフォーマンス問題が発生していました。 何らかの理由で再描画の必要がある場合は、スクリーンの関連部分を無効化する必要があります。たとえば、遷移先スクリーンの<code>Screen::afterTransition()</code>仮想関数で<code>container.invalidate()</code>を呼び出します。</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="binary-fonts">バイナリ･フォント<a class="hash-link" href="#binary-fonts" title="見出しに直接リンク">​</a></h4><p>カーニング･データもバイナリ･フォントに含まれるようになったため、バイナリ･フォントのフォーマットが変更されました。 バイナリ･フォント･ファイルを再生成する必要があります。古いファイルは正しく機能しないためです。 Makefileの設定方法によっては、これは通常すべてのアセットを再生成することで実行されます（<code>make -f simulator/gcc/Makefile clean assets</code>など）。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="touchgfx-4110">TouchGFX 4.11.0<a class="hash-link" href="#touchgfx-4110" title="見出しに直接リンク">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="backwards-compatibility-2">後方互換性<a class="hash-link" href="#backwards-compatibility-2" title="見出しに直接リンク">​</a></h3><p><code>touchgfx/framework/include/touchgfx/lcd/LCD.hpp</code>では、以前のバージョンで誤って挿入されたファイル<code>touchgfx/hal/HAL.hpp</code>のインクルードが削除されました。 このため、<code>LCD.hpp</code>を含んでいて<code>HAL.hpp</code>のコンテンツも使用しているファイルで、コンパイル･エラーが発生する可能性があります。 解決策として、ファイルに<code>touchgfx/framework/include/touchgfx/hal/HAL.hpp</code>も含めてください。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="touchgfx-4100">TouchGFX 4.10.0<a class="hash-link" href="#touchgfx-4100" title="見出しに直接リンク">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="upgrading-from-49x">4.9.xからのアップグレード<a class="hash-link" href="#upgrading-from-49x" title="見出しに直接リンク">​</a></h3><p>バージョン4.10.0から、TouchGFXはSTM32マイクロコントローラのみで実行されます。</p><p>古いプロジェクトを更新する場合には、以下を実行する必要があります。</p><p>アプリケーションのスタートアップで、以下のハイライトされたコードを追加して、STM32ハードウェア上で実行中であることをTouchGFXに認知させます。 最適な場所は、<code>BoardConfiguration.cpp</code>内の<code>hw_init()</code>関数の末尾です。</p><div class="code-header"><div><h5>BoardConfiguration.cpp</h5></div></div><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">hw_init</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//Enable CRC engine for STM32 Lock check</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">__HAL_RCC_CRC_CLK_ENABLE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="backwards-compatibility-3">後方互換性<a class="hash-link" href="#backwards-compatibility-3" title="見出しに直接リンク">​</a></h3><p>使用されないファイル<code>\touchgfx\framework\include\touchgfx\canvas_widget_renderer\RGBA8.hpp</code>が、削除されました。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="project-updater-issue">プロジェクト･アップデータの問題<a class="hash-link" href="#project-updater-issue" title="見出しに直接リンク">​</a></h3><p>TouchGFX Designerから呼び出されるIARおよびKeilプロジェクト･アップデータで、対応するIDEで設定されたカスタム･ファイル･レベルの最適化が無視されます。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="textarea-and-chromart-dma2d">TextAreaおよびChromART（DMA2D）<a class="hash-link" href="#textarea-and-chromart-dma2d" title="見出しに直接リンク">​</a></h3><p>ChromARTを含むTextAreasの描画（TextAreaが最上位の要素 / 最後に描画される場合）によって、フレームバッファの早すぎるロック解除が発生し、続いて現在の表示フレームへ不完全な状態での完了 / 転送が発生します。 TouchGFXによって<code>endFrame()</code>が呼び出されたら、すべての描画操作（DMA操作を含む）はすでに完了している必要があります。 ところが、フレームバッファの適切な保護方法においてTextAreaによる取り決め違反があるため、<code>endFrame()</code>が返された後もDMA操作を続行できるようになっています。</p><p>ウィジェットの取り決め事項は以下のとおりです。</p><ol><li>フレームバッファをロック（フレームバッファにポインタを返します）。</li><li>フレームバッファに何かを描画。 </li><li>フレームバッファをロック解除。</li></ol><p>または、DMA操作を使用するために、この場合にはフレームバッファの同期が自動的に処理されます。</p><p>4.10.0のTextAreaではこの2つの手順が混ざっているので、TextAreaが現在のスクリーンの最上位要素（最後に描画されるもの）である場合、問題が発生します。 このバグは、以下のように<code>endFrame()</code>をオーバーライドして、<code>endFrame()</code>を手動でガードすることで修正できます（F4 HALに基づく）。 これにより、ChromART操作がまだ処理中であれば、<code>endFrame()</code>は返されなくなります。  </p><div class="codeBlockContainer_I0IT language-cpp theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-cpp codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">STM32F4HAL</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">endFrame</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">dma</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">isDMARunning</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token class-name" style="color:rgb(255, 203, 107)">OSWrappers</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">tryTakeFrameBufferSemaphore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">HAL</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">endFrame</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="touchgfx-490">TouchGFX 4.9.0<a class="hash-link" href="#touchgfx-490" title="見出しに直接リンク">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="upgrading-from-480">4.8.0からのアップグレード<a class="hash-link" href="#upgrading-from-480" title="見出しに直接リンク">​</a></h3><p>アプリケーション･テンプレートの導入により、ボード･サポート･パッケージがコア･フレームワークから本質的に分離されるようになったので、4.9.0では<em>touchgfx</em>フォルダから多数の低レベル･ドライバやその他のファイルが削除されました。 代わりに、これらのファイルはアプリケーション･テンプレートから提供されるようになっています。 ただしこれは、touchgfxフォルダを置き換えるだけでは4.9.0にアップグレードできないことも意味しています。いくつかのBSPファイルが欠落する可能性があるからです。 代わりに、TouchGFX Designerが自動的にアップグレードを実行できます。 アップグレードは2つの異なる方法で実行可能なので、ユーザは自分に最適な方法を決定する必要があります。</p><div class="highlight highlight-caution"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></div>Caution</h5></div><div class="highlight-content">アップグレードの前には、必ずプロジェクトのバックアップを取るようにしてください。</div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="method-1-retain-original-file-structure">方法1: 元のファイル構造を維持<a class="hash-link" href="#method-1-retain-original-file-structure" title="見出しに直接リンク">​</a></h3><p>この方法は、単純に新しい4.9.0 Designerでプロジェクトを開くことで実行できます。 TouchGFX Designerからアップグレードを行うかどうか尋ねられるので、OKをクリックすると、TouchGFX Designerが必要な変更を適用します。 TouchGFX Designerは以下の操作を実行します。</p><ol><li>圧縮された新しいtouchgfxフォルダをアプリケーションにアンパックし、これと一致するようにTouchGFXのパスを変更。</li><li>touchgfxフォルダから削除したすべてのファイルをダウンロードしてアンパックし、プロジェクトが引き続きコンパイルできるようにする。</li></ol><p>このアプローチでは、ほぼすべてが以前と同じ状態になるので、以前のファイル構造が自分のプロジェクトに適している場合には、最も簡単な選択になります。 主な欠点は、画像コンバータの速度アップの恩恵を受けられないことです。これは、個々のファイルではなく、画像フォルダに対して作業するためです。 ただし、makefileを手動で変更してこのアプローチを使用することができます。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="method-2-import-into-new-template">方法2: 新しいテンプレートへのインポート<a class="hash-link" href="#method-2-import-into-new-template" title="見出しに直接リンク">​</a></h3><p>この方法を使用すると、プロジェクトを新しいテンプレート･ベースのファイル編成に移行できます。 このためには、まず上記の方法1を使用して、Designerでプロジェクトをアップグレードします。 次に、適切なアプリケーション･テンプレート（シミュレータ、または使用する評価ボードと合致するもの）を使用して、新しいプロジェクトを作成します。 Designerでこの新しいプロジェクトを開いて、トップ･メニューに移動し、&quot;Edit -&gt; Import GUI&quot;をクリックします。 ダイアログ･ボックスで、自分のプロジェクトの.touchgfxファイルを指定します。 これで、DesignerがすべてのUIファイル（アセットを含む）を、新しく作成したプロジェクトに自動的にインポートします。 GUIフォルダ以外に追加したコードがある場合は、それらのファイルを新しいプロジェクトに手動でコピーする必要があります。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="method-3-manual-upgrade-without-designer">方法3: Designerを使用せずに手動でアップグレード<a class="hash-link" href="#method-3-manual-upgrade-without-designer" title="見出しに直接リンク">​</a></h3><p>Designerを使用しない場合、以下のようにアップグレードを実行できます。</p><ol><li>プロジェクトで使用するtouchgfxフォルダを、4.9.0インストールにあるものと置き換える。</li><li><a href="http://ftp.draupnergraphics.com/TouchGFX/Evaluation/4.9.0/Qll3iKK54AnJer7XRNm2/fw_delta_4.8.0_4.9.0.zip" target="_blank" rel="noopener noreferrer">このzipファイル</a>をダウンロードして、touchgfxフォルダにアンパックし、削除されたファイルを復元する。</li></ol></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ドキュメント･ページのナビゲーション"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/4.20/ja/docs/miscellaneous/getting-help"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">ヘルプ情報</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/4.20/ja/docs/miscellaneous/changelog"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">更新履歴</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#touchgfx-4-20-0" class="table-of-contents__link toc-highlight">TouchGFX 4.20.0</a><ul><li><a href="#painter-interface-changed" class="table-of-contents__link toc-highlight">Painter interface changed</a></li><li><a href="#painter-implementation-moved-to-generated-files" class="table-of-contents__link toc-highlight">Painter implementation moved to generated files</a></li><li><a href="#debugging-stm32g0-with-keil" class="table-of-contents__link toc-highlight">Debugging STM32G0 with Keil</a></li><li><a href="#compiling-stm32u5-and-stm32l5-projects-with-keil" class="table-of-contents__link toc-highlight">Compiling STM32U5 and STM32L5 projects with Keil</a></li><li><a href="#logonserver-environment-variable" class="table-of-contents__link toc-highlight">LOGONSERVER environment variable</a></li></ul></li><li><a href="#touchgfx-4-19-0" class="table-of-contents__link toc-highlight">TouchGFX 4.19.0</a><ul><li><a href="#new-way-of-working-with-typographies" class="table-of-contents__link toc-highlight">New way of working with typographies</a></li><li><a href="#using-libjpeg-with-armclang" class="table-of-contents__link toc-highlight">Using LibJPEG with ARMCLANG</a></li><li><a href="#mjpeg-video-on-h750b-discovery" class="table-of-contents__link toc-highlight">MJPEG Video on H750B Discovery</a></li><li><a href="#threadx-assembler-files" class="table-of-contents__link toc-highlight">ThreadX assembler files</a></li></ul></li><li><a href="#touchgfx-4-18-0" class="table-of-contents__link toc-highlight">TouchGFX 4.18.0</a><ul><li><a href="#issues-with-cubemx-610-and-cubeprogrammer-26" class="table-of-contents__link toc-highlight">CubeMX 6.1.0およびCubeProgrammer 2.6による問題</a></li><li><a href="#new-touchgfx-format" class="table-of-contents__link toc-highlight">新しい.touchgfxフォーマット</a></li><li><a href="#lcd16bpp-fillrect-and-lcd16bpp-drawglyph" class="table-of-contents__link toc-highlight">LCD16bpp::fillRectとLCD16bpp::drawGlyph</a></li><li><a href="#makefile-and-xlsx" class="table-of-contents__link toc-highlight">Makefileとxlsx</a></li><li><a href="#font-size-limit-in-textsxsd" class="table-of-contents__link toc-highlight">Font size limit in texts.xsd</a></li><li><a href="#sdl2-linker-error-on-linux" class="table-of-contents__link toc-highlight">LinuxでのSDL2リンカ･エラー</a></li></ul></li><li><a href="#touchgfx-4-17-0" class="table-of-contents__link toc-highlight">TouchGFX 4.17.0</a><ul><li><a href="#painters-no-longer-support-setalpha" class="table-of-contents__link toc-highlight">PainterではsetAlpha()がサポートされない</a></li><li><a href="#using-the-hal-class" class="table-of-contents__link toc-highlight">HALクラスの使用</a></li><li><a href="#fmc-display-interface-in-touchgfx-generator" class="table-of-contents__link toc-highlight">TouchGFX GeneratorのFMCディスプレイ･インタフェース</a></li><li><a href="#l8-images-in-16-24-or-32bpp-configurations" class="table-of-contents__link toc-highlight">16bpp、24bpp、32bpp構成のL8画像</a></li></ul></li><li><a href="#touchgfx-4150" class="table-of-contents__link toc-highlight">TouchGFX 4.15.0</a><ul><li><a href="#mcu-support" class="table-of-contents__link toc-highlight">マイクロコントローラのサポート</a></li></ul></li><li><a href="#touchgfx-4140" class="table-of-contents__link toc-highlight">TouchGFX 4.14.0</a><ul><li><a href="#armclang-support" class="table-of-contents__link toc-highlight">ARMCLANGのサポート</a></li></ul></li><li><a href="#touchgfx-4130" class="table-of-contents__link toc-highlight">TouchGFX 4.13.0</a><ul><li><a href="#bugs" class="table-of-contents__link toc-highlight">バグ</a></li><li><a href="#additional-compiler-support" class="table-of-contents__link toc-highlight">追加のコンパイラ･サポート</a></li><li><a href="#backwards-compatibility" class="table-of-contents__link toc-highlight">後方互換性</a></li></ul></li><li><a href="#touchgfx-4123" class="table-of-contents__link toc-highlight">TouchGFX 4.12.3</a><ul><li><a href="#backwards-compatibility-1" class="table-of-contents__link toc-highlight">後方互換性</a></li></ul></li><li><a href="#touchgfx-4110" class="table-of-contents__link toc-highlight">TouchGFX 4.11.0</a><ul><li><a href="#backwards-compatibility-2" class="table-of-contents__link toc-highlight">後方互換性</a></li></ul></li><li><a href="#touchgfx-4100" class="table-of-contents__link toc-highlight">TouchGFX 4.10.0</a><ul><li><a href="#upgrading-from-49x" class="table-of-contents__link toc-highlight">4.9.xからのアップグレード</a></li><li><a href="#backwards-compatibility-3" class="table-of-contents__link toc-highlight">後方互換性</a></li><li><a href="#project-updater-issue" class="table-of-contents__link toc-highlight">プロジェクト･アップデータの問題</a></li><li><a href="#textarea-and-chromart-dma2d" class="table-of-contents__link toc-highlight">TextAreaおよびChromART（DMA2D）</a></li></ul></li><li><a href="#touchgfx-490" class="table-of-contents__link toc-highlight">TouchGFX 4.9.0</a><ul><li><a href="#upgrading-from-480" class="table-of-contents__link toc-highlight">4.8.0からのアップグレード</a></li><li><a href="#method-1-retain-original-file-structure" class="table-of-contents__link toc-highlight">方法1: 元のファイル構造を維持</a></li><li><a href="#method-2-import-into-new-template" class="table-of-contents__link toc-highlight">方法2: 新しいテンプレートへのインポート</a></li><li><a href="#method-3-manual-upgrade-without-designer" class="table-of-contents__link toc-highlight">方法3: Designerを使用せずに手動でアップグレード</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">All rights reserved © 2022 STMicroelectronics | <a href="https://www.st.com/content/st_com/en/common/terms-of-use.html">Terms of use</a> | <a href="https://www.st.com/content/st_com/en/common/privacy-policy.html">Privacy Policy</a> | <a href="/docs/miscellaneous/cookie-policy">Cookie Policy</a> | <a href="https://app-de.onetrust.com/app/#/webform/2b87200d-4023-4588-9df7-ab0cdea1a67e">Exercise your rights</a></div></div></div></footer></div>
<script src="/4.20/ja/assets/js/runtime~main.1f0ef3f3.js"></script>
<script src="/4.20/ja/assets/js/main.53dde143.js"></script>
</body>
</html>